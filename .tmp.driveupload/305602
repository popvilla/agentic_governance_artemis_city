"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.readNote = readNote;
exports.updateNote = updateNote;
exports.searchNotes = searchNotes;
exports.listNotes = listNotes;
exports.deleteNote = deleteNote;
exports.manageFrontmatter = manageFrontmatter;
exports.manageTags = manageTags;
exports.searchReplace = searchReplace;
const index_1 = require("./index");
/**
 * Reads the content of a specific note from Obsidian.
 * @param path The path to the note (e.g., 'My Folder/My Note.md').
 * @returns The content of the note.
 */
async function readNote(path) {
    const response = await index_1.obsidianAPI.get(`/vault/read`, {
        params: { path },
    });
    return response.data.content;
}
/**
 * Updates an existing note or creates a new one. Can append content.
 * @param path The path to the note.
 * @param content The new content for the note.
 * @param options Options, e.g., { append: true } to append content.
 * @returns A success message.
 */
async function updateNote(path, content, options) {
    const response = await index_1.obsidianAPI.post(`/vault/write`, {
        path,
        content,
        cursor: options?.append ? { line: -1, ch: -1 } : undefined, // Append to end if 'append' is true
    });
    return response.data.message || 'Note updated successfully.';
}
/**
 * Searches for notes within the Obsidian vault.
 * @param query The search query string.
 * @returns An array of search results.
 */
async function searchNotes(query) {
    const response = await index_1.obsidianAPI.get(`/vault/search`, {
        params: { query },
    });
    return response.data;
}
/**
 * Lists all notes in the Obsidian vault.
 * @returns An array of note paths.
 */
async function listNotes() {
    const response = await index_1.obsidianAPI.get(`/vault/list`);
    return response.data.files;
}
/**
 * Deletes a note from the Obsidian vault.
 * @param path The path to the note to delete.
 * @returns A success message.
 */
async function deleteNote(path) {
    const response = await index_1.obsidianAPI.delete(`/vault/delete`, {
        params: { path },
    });
    return response.data.message || 'Note deleted successfully.';
}
/**
 * Manages frontmatter for a note.
 * Note: The Obsidian Local REST API might not have a direct endpoint for this.
 * This implementation assumes a hypothetical `/vault/frontmatter` endpoint.
 * If not available, this would require reading the note, parsing/modifying content, and writing back.
 * @param path The path to the note.
 * @param key The frontmatter key.
 * @param value The value to set for the key.
 * @returns A success message.
 */
async function manageFrontmatter(path, key, value) {
    const response = await index_1.obsidianAPI.post(`/vault/frontmatter`, {
        path,
        key,
        value,
    });
    return response.data.message || 'Frontmatter updated successfully.';
}
/**
 * Manages tags for a note (add or remove).
 * Note: The Obsidian Local REST API might not have a direct endpoint for this.
 * This implementation assumes a hypothetical `/vault/tags` endpoint.
 * If not available, this would require reading the note, parsing/modifying content, and writing back.
 * @param path The path to the note.
 * @param tags An array of tags to add or remove.
 * @param action 'add' or 'remove'.
 * @returns A success message.
 */
async function manageTags(path, tags, action) {
    const response = await index_1.obsidianAPI.post(`/vault/tags`, {
        path,
        tags,
        action,
    });
    return response.data.message || 'Tags updated successfully.';
}
/**
 * Performs a search and replace operation within a note.
 * Note: The Obsidian Local REST API might not have a direct endpoint for this.
 * This implementation assumes a hypothetical `/vault/search-replace` endpoint.
 * If not available, this would require reading the note, performing string replacement, and writing back.
 * @param path The path to the note.
 * @param search The string to search for.
 * @param replace The string to replace with.
 * @returns The updated content of the note.
 */
async function searchReplace(path, search, replace) {
    const response = await index_1.obsidianAPI.post(`/vault/search-replace`, {
        path,
        search,
        replace,
    });
    return response.data.content;
}
//# sourceMappingURL=methods.js.map