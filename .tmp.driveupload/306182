# ============================================
# ARTEMIS CITY - FLAKE8 CONFIGURATION
# ============================================
# Flake8: Python linting and style checking
# https://flake8.pycqa.org/

[flake8]

# ============================================
# GENERAL SETTINGS
# ============================================

# Maximum line length (compatible with Black)
max-line-length = 100

# Maximum complexity for functions (cyclomatic complexity)
max-complexity = 10

# ============================================
# FILE PATTERNS
# ============================================

# Files to exclude from linting
exclude =
    .git,
    __pycache__,
    .venv,
    venv,
    .eggs,
    *.egg,
    build,
    dist,
    .tox,
    .mypy_cache,
    .pytest_cache,
    node_modules,
    Artemis Agentic Memory Layer,
    **/migrations/,

# File patterns to include
filename = *.py

# ============================================
# ERROR CODES
# ============================================

# Errors to ignore
ignore =
    # E203: Whitespace before ':' (conflicts with Black)
    E203,
    # E501: Line too long (handled by max-line-length)
    E501,
    # W503: Line break before binary operator (PEP 8 updated to prefer this)
    W503,
    # W504: Line break after binary operator (opposite of W503, style choice)
    W504,
    # W293: Blank line contains whitespace (auto-fixed by Black)
    W293,
    # W291: Trailing whitespace (auto-fixed by Black)
    W291,
    # W292: No newline at end of file (auto-fixed by editors)
    W292,
    # E266: Too many leading '#' for block comment
    E266,
    # E731: Do not assign a lambda expression (sometimes necessary)
    E731,
    # F541: f-string without placeholders (sometimes used for consistency)
    F541,
    # F841: Local variable assigned but never used (may be for future use)
    F841,
    # E226: Missing whitespace around arithmetic operator (stylistic)
    E226,
    # E261: At least two spaces before inline comment (stylistic)
    E261,
    # E302: Expected 2 blank lines (will be fixed by Black)
    E302,
    # E305: Expected 2 blank lines after class/function (will be fixed by Black)
    E305,
    # E306: Expected 1 blank line before nested definition
    E306,
    # C901: Function is too complex (refactoring needed separately)
    C901,

# Errors to always check (even if ignored elsewhere)
select =
    # Pyflakes errors
    F,
    # PEP8 errors
    E,
    # PEP8 warnings
    W,
    # Complexity
    C90,

# ============================================
# PER-FILE IGNORES
# ============================================

per-file-ignores =
    # Allow unused imports in __init__.py files
    __init__.py:F401,F403
    # Allow imports not at top in some files (due to sys.path manipulation)
    interface/codex_cli.py:E402
    main.py:E402
    # Demo files can be more relaxed
    demo_*.py:E402,F401
    # Test files - allow unused variables and imports
    tests/*.py:F841,F401
    # Sandbox files - allow relaxed style
    sandbox_city/**/*.py:E302,E305,F841

# ============================================
# DOCSTRING SETTINGS
# ============================================

# Require docstrings (when using flake8-docstrings)
docstring-convention = google

# ============================================
# IMPORT SETTINGS
# ============================================

# Application import names (for import order checking)
application-import-names = agents,core,interface,memory,sandbox_city

# ============================================
# FORMATTING
# ============================================

# Output format
# Options: default, pylint, html
format = default

# Show source code for errors
show-source = true

# Show statistics at the end
statistics = true

# Count errors
count = true

# ============================================
# PLUGIN SETTINGS
# ============================================

# Flake8-bugbear: Additional bug and design problems
# Enabled if installed

# Flake8-comprehensions: Checks for unnecessary comprehensions
# Enabled if installed

# Flake8-simplify: Suggests code simplifications
# Enabled if installed
